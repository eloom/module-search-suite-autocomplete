define(["jquery","uiComponent","uiRegistry","mageUtils"],function(a,f,e,g){return f.extend({defaults:{minSearchLength:2},initialize:function(){this._super();g.limit(this,"load",this.searchDelay);a(this.inputSelector).unbind("input").on("input",a.proxy(this.load,this)).on("input",a.proxy(this.searchButtonStatus,this)).on("focus",a.proxy(this.showPopup,this));a(document).on("click",a.proxy(this.hidePopup,this));a(document).ready(a.proxy(this.searchButtonStatus,this))},load:function(c){var b=a(this.inputSelector).val();
if(b.length<this.minSearchLength)return!1;e.get("searchsuiteautocompleteDataProvider",function(d){d.searchText=b;d.load()})},showPopup:function(c){c=a(this.inputSelector);var b=c.is(":focus")&&c.val().length>=this.minSearchLength;e.get("searchsuiteautocomplete_form",function(d){d.showPopup(b)})},hidePopup:function(c){0>=a(this.searchFormSelector).has(a(c.target)).length&&e.get("searchsuiteautocomplete_form",function(b){b.showPopup(!1)})},searchButtonStatus:function(c){var b=a(this.inputSelector);
c=a(this.searchFormSelector+" "+this.searchButtonSelector);b=0>=b.val().length;c.attr("disabled",b)},spinnerShow:function(){a(this.searchFormSelector).addClass("loading")},spinnerHide:function(){a(this.searchFormSelector).removeClass("loading")}})});
